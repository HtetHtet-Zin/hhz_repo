<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{event-registration :: head}"></head>

<body class="event-list">

<div th:replace="~{fragments/header :: header}"></div>

<main class="main" style="padding-bottom: 50px;">

    <div class="page-title dark-background" data-aos="fade" th:style="'background-image: url(' + @{/images/Join_Event.png} + ');'">
        <div class="container position-relative text-center">
            <h1 class="display-4 fw-bold">Cafeteria Booking</h1>
        </div>
    </div>

    <div class="container my-5">
        <!-- Info Table -->
        <table class="table table-bordered schedule-table shadow-sm rounded"> <!--w-auto mx-auto mb-5-->
            <tbody>
            <thead>
            <tr>
                <th scope="col" style="width: 200px; text-align: left;">Incharge Person</th>
                <td th:text="${planner.incharge_person}" style="text-align: left;"></td>
            </tr>
            <tr>
                <th scope="col" style="width: 200px; text-align: left;">Supported Members</th>
                <td th:text="${planner.supported_members ?: 'No supported members yet'}" style="text-align: left;"></td>
            </tr>
            </thead>
            </tbody>
        </table>

        <div class="d-flex justify-content-between align-items-center m-3">
            <div>
                <p class="mb-0">There are <span id="count"></span> <span id="activity-text"></span>.</p>
            </div>
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <input class="form-control" name="keyword" id="search" placeholder="Search ...">
                </div>
            </div>
        </div>

        <table class="table table-hover table-bordered schedule-table shadow-sm rounded">
            <input type="hidden" th:value="${planner.eventId}" name="eventId" id="eventId">
            <thead>
            <tr>
                <th scope="col">No. </th>
                <th scope="col">Event</th>
                <th scope="col">Schedule</th>
                <th scope="col">Book</th>
            </tr>
            </thead>
            <tbody id="scheduleTableBody">

            </tbody>
        </table>

        <nav aria-label="Staff pagination">
            <ul class="pagination justify-content-center" id="pagination"></ul>
        </nav>

        <!-- Cafeteria Usage Form Modal -->
        <div class="modal fade" id="scheduleModal" tabindex="-1" aria-labelledby="scheduleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <form>
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="scheduleModalLabel">Cafeteria Usage Form For - <span th:text="${planner.eventName}"></span> </h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>

                        <div class="modal-body" id="modalBody">
                            <div class="mb-3 row">
                                <label for="applicantName" class="col-sm-4 col-form-label">Applicant Name <span class="text-danger">*</span></label>
                                <div class="col-sm-8">
                                    <input type="text" class="form-control" id="applicantName" name="applicantName" readonly required>
                                </div>
                            </div>

                            <div class="mb-3 row">
                                <label for="applicantStaffId" class="col-sm-4 col-form-label">Applicant Staff ID <span class="text-danger">*</span></label>
                                <div class="col-sm-8">
                                    <input type="text" class="form-control" id="applicantStaffId" name="applicantStaffId" readonly required>
                                </div>
                            </div>

                            <div class="mb-3 row">
                                <label for="team" class="col-sm-4 col-form-label">Team <span class="text-danger">*</span></label>
                                <div class="col-sm-8">
                                    <input type="text" class="form-control" id="team" name="team" readonly required>
                                </div>
                            </div>

                            <div class="mb-3 row">
                                <label for="department" class="col-sm-4 col-form-label">Department <span class="text-danger">*</span></label>
                                <div class="col-sm-8">
                                    <input type="text" class="form-control" id="department" name="department" readonly required>
                                </div>
                            </div>

                            <div class="mb-3 row">
                                <label for="preferredDate" class="col-sm-4 col-form-label">
                                    Preferred Date <span class="text-danger">*</span>
                                </label>
                                <div class="col-sm-8">
                                    <input type="text" class="form-control" id="preferredDate" name="preferredDate" readonly>
                                </div>
                            </div>
                        </div>

                        <div class="modal-footer">
                            <button type="button" class="btn cancel" data-bs-dismiss="modal">Cancel</button>
                            <button type="button" class="btn confirm" id="saveBtn">Save</button>
                            <button type="button" class="btn confirm" id="saveContinueBtn">Save & Continue</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <!-- Cafeteria Usage Form -->
    </div>
</main>

<div id="preloader"></div>

<!-- Vendor JS Files -->
<script th:src="@{/assets/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>
<!-- toast -->
<script th:src="@{/js/jquery.min.js}"></script>
<script th:src="@{/js/toast.min.js}"></script>
<script th:src="@{/js/toast-config.js}"></script>
<!-- toast -->
<div th:replace="~{fragments/footer :: footer}"></div>
<script th:src="@{/js/cafeteria-booking.js}"></script>

<!-- Main JS File -->
<script th:src="@{/assets/js/main.js}"></script>

<script>
    const scheduleUrl = '[[@{${WebUrl.EVENT_REGISTRATION_URL}}]]';
    const checkBooked = '[[@{${WebUrl.CHECK_BOOKED_URL}}]]';
    const bookingUrl = '[[@{${WebUrl.CAFETERIA_BOOKING_POST_URL}}]]';

    const currentStaffName = '[[@{${StaffName}}]]';
    const currentStaffNo = '[[@{${StaffNo}}]]';
    const currentTeam = '[[@{${Team}}]]';
    const currentDepartment = '[[@{${Department}}]]';
</script>
</body>
</html>
